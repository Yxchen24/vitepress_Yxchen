<div class="ant-card-body" style="padding: 24px;"><div class="md-viewer   code-blocks-loaded"><div class="markdown-body"><h2>回答重点</h2>
<h3>序列化</h3>
<p>是将对象转换为字节流的过程，这样对象可以通过网络传输、持久化存储或者缓存。Java 提供了 <code>java.io.Serializable</code> 接口来支持序列化，只要类实现了这个接口，就可以将该类的对象进行序列化。</p>
<h3>反序列化</h3>
<p>是将字节流重新转换为对象的过程，即从存储中读取数据并重新创建对象。</p>
<h3>其它</h3>
<ul>
<li><strong>应用场景</strong>：包括网络传输、远程调用、持久化存储（如保存到文件或数据库）、以及分布式系统中数据交换。</li>
<li><strong>Java 序列化关键类和接口</strong>：<code>ObjectOutputStream</code> 用于序列化，<code>ObjectInputStream</code> 用于反序列化。类必须实现 <code>Serializable</code> 接口才能被序列化。</li>
<li><strong>transient 关键字</strong>：在序列化过程中，有些字段不需要被序列化，例如敏感数据，可以使用 <code>transient</code> 关键字标记不需要序列化的字段。</li>
<li><strong>serialVersionUID</strong>：每个 <code>Serializable</code> 类都应该定义一个 <code>serialVersionUID</code>，用于在反序列化时验证版本一致性。如果没有明确指定，Java 会根据类的定义自动生成一个 UID，版本不匹配可能导致反序列化失败。</li>
<li><strong>序列化性能问题</strong>：Java 的默认序列化机制可能比较慢，尤其是对于大规模分布式系统，可能会选择更加高效的序列化框架（如 Protobuf、Kryo）。</li>
<li><strong>安全性</strong>：反序列化是一个潜在的安全风险，因为通过恶意构造的字节流，可能会加载不安全的类或执行不期望的代码。因此，反序列化过程需要进行输入验证，避免反序列化漏洞。</li>
</ul>
<h2>扩展知识</h2>
<h3>序列化与反序列化理解</h3>
<p>序列化其实就是将对象转化成可传输的字节序列格式，以便于存储和传输。</p>
<p>因为对象在 JVM 中可以认为是“立体”的，会有各种引用，比如在内存地址 Ox1234 引用了某某对象，那此时这个对象要传输到网络的另一端时候就需要把这些引用“压扁”。</p>
<p>因为网络的另一端的内存地址 Ox1234 可以没有某某对象，所以传输的对象需要包含这些信息，然后接收端将这些扁平的信息再反序列化得到对象。</p>
<p>所以，<strong>反序列化就是将字节序列格式转换为对象的过程</strong>。</p>
<img src="https://pic.code-nav.cn/mianshiya/question_picture/1772087337535152129/xbVYRn0Y_a8d32fe2-c98d-4240-a9c8-9961b259a2b7_mianshiya.png" alt="" width="100%">
<h3>Java 序列化 Serializable 的意义</h3>
<blockquote>
<p>首先说一下 Serializable，这个接口没有什么实际的含义，就是起标记作用。</p>
</blockquote>
<p>来看下源码就很清楚了，除了 String、数组和枚举之外，如果实现了这个接口就走 writeOrdinaryObject ，否则就序列化就抛错。</p>
<img src="https://pic.code-nav.cn/mianshiya/question_picture/1783397053004488705/image-20210228112426413_mianshiya.png" alt="image-20210228112426413.png" width="100%">
<blockquote>
<p>serialVersionUID 又有什么用？</p>
</blockquote>
<p><code>private static final long serialVersionUID = 1L;</code></p>
<p>想必经常会看到这样的代码，这个 ID 其实就是用来验证序列化的对象和反序列化对应的对象的 ID 是否是一致的。</p>
<p>所以这个 ID 的数字其实不重要，无论是 1L 还是 idea 自动生成的，只要序列化的时候对象的 serialVersionUID 和反序列化的时候对象的 serialVersionUID 一致的话就行。</p>
<p>如果没有显式指定 serialVersionUID ，则编译器会根据类的相关信息自动生成一个，可以认为是一个指纹。</p>
<p>所以如果你没有定义一个 serialVersionUID 然后序列化一个对象之后，在反序列化之前把对象的类的结构改了，比如增加了一个成员变量，则此时的反序列化会失败。</p>
<p>因为类的结构变了，生成的指纹就变了，所以 serialVersionUID 就不一致了。</p>
<p><strong>所以 serialVersionUID 就是起验证作用</strong>。</p>
<blockquote>
<p>Java 序列化不包含静态变量</p>
</blockquote>
<p>简单地说就是序列化之后存储的内容不包含静态变量的值，看一下下面的代码就很清晰了。</p>
<img src="https://pic.code-nav.cn/mianshiya/question_picture/1783388929455529986/VOUh1Ohj_image_mianshiya.png" alt="image.png" width="733"></div></div><div style="margin-bottom: 16px;"></div><div class="best-answer-author">作者：<span class="ant-avatar ant-avatar-circle ant-avatar-image css-m4timi" style="width: 25px; height: 25px; font-size: 18px;"><img src="https://pic.code-nav.cn/user_avatar/1783388929455529986/thumbnail/1J7dPbfX7R2xdFmc.jpg"></span><div class="author-name"><a target="_blank" href="/user/1783388929455529986">Yes面试鸭官方</a><img alt="等级图标" loading="lazy" width="38" height="16" decoding="async" data-nimg="1" srcset="/_next/image?url=%2Fassets%2Flevel%2Flevel7.png&amp;w=48&amp;q=75 1x, /_next/image?url=%2Fassets%2Flevel%2Flevel7.png&amp;w=96&amp;q=75 2x" src="/_next/image?url=%2Fassets%2Flevel%2Flevel7.png&amp;w=96&amp;q=75" style="color: transparent;"></div></div><div class="shareFooter"><div class="ant-divider css-m4timi ant-divider-horizontal ant-divider-with-text ant-divider-with-text-center shareTitle" role="separator"><span class="ant-divider-inner-text">分享最高赚 ¥64.5 </span></div><div class="shareIcons"><div class="ant-space css-m4timi ant-space-horizontal ant-space-align-center ant-space-gap-row-large ant-space-gap-col-large"><div class="ant-space-item"><button type="button" class="ant-btn css-m4timi ant-btn-circle ant-btn-primary ant-btn-icon-only linkBtn"><span class="ant-btn-icon"><span role="img" aria-label="link" class="anticon anticon-link"><svg viewBox="64 64 896 896" focusable="false" data-icon="link" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M574 665.4a8.03 8.03 0 00-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8a8.03 8.03 0 00-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zm258.6-474c-84.6-84.6-221.5-84.6-306 0L410.3 307.6a8.03 8.03 0 000 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6a8.03 8.03 0 000 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3a8.03 8.03 0 00-11.3 0L372.3 598.7a8.03 8.03 0 000 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z"></path></svg></span></span></button></div><div class="ant-space-item"><div class="miniappIconWrapper"><img src="/assets/svg/miniapp.svg" alt="微信小程序" class="miniappIcon"></div></div><div class="ant-space-item"><button type="button" class="ant-btn css-m4timi ant-btn-circle ant-btn-primary ant-btn-icon-only pictureBtn"><span class="ant-btn-icon"><span role="img" aria-label="picture" class="anticon anticon-picture"><svg viewBox="64 64 896 896" focusable="false" data-icon="picture" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792zm0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2zM304 456a88 88 0 100-176 88 88 0 000 176zm0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z"></path></svg></span></span></button></div></div></div></div></div>